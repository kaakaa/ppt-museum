doctype html
html(lang="ja")
  head
    title= "ppt-museum"
    meta(charset="utf-8")
    meta(http-equiv="X-UA-Compatible", content="IE=edge")
    meta(name="viewport",content="width=device-width, initial-scale=1")
    meta(name="description", content="powerpoint uploader")
    meta(name="author", content="kaakaa")

    link(href="/ppt-museum/startbootstrap-3-col-portfolio/css/bootstrap.min.css", rel="stylesheet")
    link(href="/ppt-museum/startbootstrap-3-col-portfolio/css/3-col-portfolio.css", rel="stylesheet")
    link(href="/ppt-museum/css/style.css", rel="stylesheet")
  body
    nav.navbar.navbar-inverse.navbar-fixed-top(role="navigation")
      .container
        .navbar-header
          button.navbar-toggle(type="button", data-toggle="collapse", data-target="#bs-example-navbar-collapse-1")
            span.sr-only Toggle navigation
            span.icon-bar
            span.icon-bar
            span.icon-bar
          a.navbar-brand(href="/") PPT-MUSEUM
        .collapse.navbar-collapse#bs-example-navbar-collapse-1
          ul.nav.navbar-nav
            li
              a(href="/ppt-museum/upload") upload
    .container
      .row
        .col-lg-12
          h1.page-header PPT-MUSEUM
            small slide uploader

      each tmp in helper.eachSlice(slides, 3)
        .row.row-relative
          each slide in tmp
            include content

      .row.text-center
        .col-lg-12
          ul.pagination
            li
              a(href="#") &laquo;
            li.active
              a(href="#") 1
            li
              a(href="#") 2
            li
              a(href="#") 3
            li
              a(href="#") 4
            li
              a(href="#") &raquo;

      footer
        .row
          .col-lg-12
            p Copyright &copy; kaakaa 2016

    script(src="/ppt-museum/startbootstrap-3-col-portfolio/js/jquery.js")
    script(src="/ppt-museum/startbootstrap-3-col-portfolio/js/bootstrap.min.js")
    :js
      $("button[id^='show-comment-']").on('click', function() {
        var id = $(this).data('id');
        $('.comment-body-' + id).html('loading');

        $.ajax({
          type: 'GET',
          url: '/ppt-museum/slide/comments/' + id,
          success: function(data) {
            $('#comment-body-' + id).html(data);
          },
          error: function(err) {
            alert("error" + JSON.stringify(err));
          }
        });
      });

      $("button[id^='remove-slide-']").on('click', function() {
        var id = $(this).data('id');
        $.ajax({
          type: 'DELETE',
          url: '/ppt-museum/slide/delete/' + id,
          success: function(data) {
            console.log(data);
            location.reload();
          },
          error: function(err) {
            alert("error" + JSON.stringify(err));
          }
        });
      });

      $('#comment-form-*').submit(function(event) {
        event.preventDefault();

        var form = $(this);
        var id = $(this).data('id');
        $.ajax({
          type: 'POST',
          url: 'pptmuseum/slide/comments/' + id,
          data: form.serialize(),
          success: function(data) {
            console.log(data);
          },
          error: function(err) {
            alert("error" + JSON.stringify(err));
          }
        })
      });

